<div class="ui-g">

    <div class="ui-g-12">

        <p-breadcrumb [model]="breadcrumbs" ></p-breadcrumb>

        <h1>{{testFacility.name}} Test Facility Details</h1>

        <p-messages [value]="notificationMsgs" [closable]="false"></p-messages>

        <p-tabView (onChange)="handleChange($event)">

            <p-tabPanel header="Information" id='details'>

                <p-growl [value]="msgs"></p-growl>

                <div class="subsection">
                   
                    <form #tfForm="ngForm" (ngSubmit)="onSubmit(tfForm.value)">

                        <h2>Next Maintainence Date: {{testFacility.nextMaintenanceDate}}</h2>
                        <!-- Begin Panel - Test Facility Name and Location -->

                        <p-panel header="Information">

                            <div class="body">

                                <!-- Begin Name -->

                                <div class="input-row">

                                    <div class="md-inputfield">
                                        <input type="text" id="name" pInputText name="name" [(ngModel)]="testFacility.name" #testFacilityNameRef="ngModel"
                                               minlength="3" class="form-control" required row="20"
                                               (focus)="testFacilityNameRef.focus=true" (blur)="testFacilityNameRef.focus=false">
                                        <label>Name <span [ngClass]="{'error': testFacilityNameRef.dirty && testFacilityNameRef.errors?.required}">*</span></label>
                                    </div>

                                    <p class="helper error" *ngIf="testFacilityNameRef.dirty && (testFacilityNameRef.errors?.required || testFacilityNameRef.errors?.minlength)">At least three characters</p>

                                </div>

                                <!-- End Name -->
                                <!-- Begin Address Line 1 -->

                                <div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <input type="text" pInputText name="addressLine1" class="form-control" row="20" [(ngModel)]="address.addressLine1"
                                               #tfAddress1Ref="ngModel"
                                               (focus)="tfAddress1Ref.focus=true" (blur)="tfAddress1Ref.focus=false">
                                        <label>Address Line 1</label>
                                    </div>

                                    <!--<p class="helper hint" *ngIf="tfAddress1Ref.focus">For example, 123 Main Street</p>
                                    <p class="helper error" *ngIf="tfAddress1Ref.errors?.required && !tfAddress1Ref.focus">Required</p>-->

                                </div>

                                <!-- End Address Line 1 -->
                                <!-- Begin Address Line 2 -->

                                <div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <input type="text" pInputText class="form-control" row="20" name="addressLine2" [(ngModel)]="address.addressLine2"
                                               #tfAddress2Ref="ngModel"
                                               (focus)="tfAddress2Ref.focus=true" (blur)="tfAddress2Ref.focus=false">
                                        <label>Address Line 2</label>
                                    </div>

                                    <!--<p class="helper hint" *ngIf="tfAddress2Ref.focus">For example, Suite 100 or Building 1</p>-->

                                </div>

                                <!-- End Address Line 2 -->
                                <!-- Begin City -->

                                <div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <input type="text" pInputText class="form-control" row="20" name="city" #tfCityRef="ngModel" [(ngModel)]="address.city"
                                               (focus)="tfCityRef.focus=true" (blur)="tfCityRef.focus=false">
                                        <label>City </label>
                                    </div>

                                    <!--<p class="helper error" *ngIf="tfCityRef.errors?.required && !tfCityRef.focus">Required</p>-->

                                </div>

                                <!-- End City -->
                                <!-- Begin State -->

                                <div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <input type="text" pInputText class="form-control" row="20" name="state" [(ngModel)]="address.state" #tfstateRef="ngModel"
                                               (focus)="tfstateRef.focus=true" (blur)="tfstateRef.focus=false">
                                        <label>State </label>
                                    </div>

                                    <!--<p class="helper error" *ngIf="tfstateRef.errors?.required && !tfstateRef.focus">Required</p>-->

                                </div>

                                <!-- End State -->
                                <!-- Begin Postal Code -->

                                <div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <input type="text" pInputText class="form-control" row="20" name="postalCode" [(ngModel)]="address.postalCode" #tfpostalCodeRef="ngModel"
                                               (focus)="tfpostalCodeRef.focus=true" (blur)="tfpostalCodeRef.focus=false">
                                        <label>Postal Code </label>
                                    </div>

                                    <!--<p class="helper error" *ngIf="tfpostalCodeRef.errors?.required && !tfpostalCodeRef.focus">Required</p>-->

                                </div>

                                <!-- End Postal Code -->
                                <!-- Begin Operation Hours -->

                                <!--<div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <p-dropdown [options]="operatingHours" [(ngModel)]="testFacility.operatingHourId" (onChange)="onOperatingHourChange($event)" name="operatingHours" [autoWidth]="false"></p-dropdown>

                                        <label>Operation Hours</label>
                                    </div>

                                </div>-->

                                <!-- End State -->
                                <!-- Begin Maintainence Frequency -->

                                <!--<div class="input-row md-spaced">

                                    <div class="md-inputfield">
                                        <p-dropdown [options]="maintenanceFrequencies" [(ngModel)]="testFacility.maintenanceFrequencyId" (onChange)="onMaintenanceFrequencyChange($event)" name="maintenanceFrequencies" [autoWidth]="false"></p-dropdown>

                                        <label> Maintainence Frequency</label>
                                    </div>

                                </div>-->
                               
                                <div class="input-row md-spaced">
                                    <label>Maintenance Frequency</label>
                                    <p-checkbox name="groupname" value="IsFrequency" label="Maintenance Frequency" [(ngModel)]="IsFrequency" binary="true"></p-checkbox>
                                
                                     
                                      <div class="md-inputfield">
                                        <div id="selector"></div>
                                    </div>
                                  
                                </div>
                                <!-- End State -->
                                <!-- Begin Description -->

                                <div class="input-row md-spaced">
                                    <label>Description</label>
                                    <div class="md-inputfield">
                                       
                                        <p-editor [(ngModel)]="testFacility.description" name="description" [style]="{'min-height':'160px'}" placeholder="Max 500 characters. ">
                                            <header>
                                                <select class="ql-size">
                                                    <option value="small"></option>
                                                    <!-- Note a missing, thus falsy value, is used to reset to default -->
                                                    <option selected></option>
                                                    <option value="large"></option>
                                                    <option value="huge"></option>
                                                </select>
                                                <span class="ql-formats">
                                                    <button class="ql-bold"></button>
                                                    <button class="ql-italic"></button>
                                                    <button class="ql-underline"></button>
                                                </span>
                                            </header>
                                        </p-editor>

                                        
                                    </div>
                                </div>

                                <!-- End State -->
                            </div>

                            <footer>
                                <p>* indicates required field</p>
                                <button pButton type="submit" [disabled]="!tfForm.valid" label="Save" icon="ui-icon-save"></button>
                            </footer>

                        </p-panel>

                        <!-- End Panel - Test Facility Name and Location -->

                    </form>

                </div>

                <div class="subsection">

                    <form>

                        <!-- Begin Dialog - Assign User Role -->

                        <p-dialog header="Add User Roles" [(visible)]="displayAssignUserRolesDialog" modal="modal" showEffect="fade" responsive="true">

                            <p>Please select one or more users and their role at the {{testFacility.name}} test facility.</p>

                            <!-- Begin Users -->

                            <div class="input-row">

                                <label>
                                    <span class="text">Users</span>

                                    <p-autoComplete [(ngModel)]="filteredSelectedUserNames" [suggestions]="filteredUserNames" (completeMethod)="filterUserNames($event)"
                                                    name="username" [minLength]="1" placeholder="Search by Name/#"
                                                    field="firstName" [multiple]="true">
                                    </p-autoComplete>

                                </label>

                            </div>

                            <!-- End Users -->
                            <!-- Begin Role -->

                            <div class="input-row">

                                <!-- Note: p-dropdown includes a "label" element, so it should not be wrapped in another one. -->
                                <span class="pseudo-label">Role</span>

                                <p-dropdown [options]="userRoles" (onChange)="onUserRoleChange($event)" name="userRole" [autoWidth]="false"></p-dropdown>

                            </div>

                            <!-- End Role -->

                            <footer>
                                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                                    <p-checkbox name="groupname" value="IsKeepOpen" label="Keep Open" [(ngModel)]="IsKeepOpen" binary="true"></p-checkbox>
                                    <button type="button" pButton icon="ui-icon-close" (click)="displayAssignUserRolesDialog=false" label="Cancel"></button>
                                    <button type="button" pButton icon="ui-icon-save" (click)="onAddUserRole()" label="Add User Role"></button>
                                </div>
                            </footer>

                        </p-dialog>

                        <!-- End Dialog - Assign User Role -->
                        <!-- Begin Panel - Test Facility Users -->

                        <p-panel>

                            <header class="with-controls">
                                <p class="ui-panel-title">Test Facility Users</p>
                                <p class="controls"><button type="text" (click)="displayAssignUserRolesDialog=true" pButton icon="ui-icon-person-add" label="Add User Roles&hellip;"></button></p>
                            </header>

                            <div class="ui-grid-row">

                                <p-dataTable [value]="TestFacilityRoles" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]">
                                    <p-column field="name" header="Name" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                                    <p-column field="role" header="Role" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                                    <p-column header="Action">

                                        <template let-TestFacilityRole="rowData" pTemplate type="body">
                                            <button pButton type="button" icon="ui-icon-remove-circle" (click)="onDeleteUserRoleMap(TestFacilityRole.id)" label="Delete"></button>
                                        </template>
                                    </p-column>
                                </p-dataTable>

                            </div>

                        </p-panel>

                        <!-- End Panel - Test Facility Users -->

                    </form>

                </div>
                <div class="subsection">

                    <form>

                        <!-- Begin Dialog - Assign Departments -->

                        <p-dialog header="Add Departments" [(visible)]="displayAssignDepartmentsDialog" modal="modal" showEffect="fade" responsive="true">

                            <p>Please select one or more departments at the {{testFacility.name}} test facility.</p>

                            <div class="input-row">

                                <!-- Note: p-dropdown includes a "label" element, so it should not be wrapped in another one. -->
                                <span class="pseudo-label">Departments</span>

                                <p-dropdown [options]="departments" (onChange)="onDepartmentChange($event)" name="departments" [autoWidth]="false"></p-dropdown>

                            </div>

                            <!-- End Role -->

                            <footer>
                                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                                    <p-checkbox name="groupname" value="IsKeepOpen" label="Keep Open" [(ngModel)]="IsKeepOpen" binary="true"></p-checkbox>
                                    <button type="button" pButton icon="ui-icon-close" (click)="displayAssignDepartmentsDialog=false" label="Cancel"></button>
                                    <button type="button" pButton icon="ui-icon-save" (click)="onAddDepartment()" label="Add Department"></button>
                                </div>
                            </footer>

                        </p-dialog>

                        <!-- End Dialog - Assign Departments -->

                        <!-- Begin Panel - Departments -->

                        <p-panel>

                            <header class="with-controls">
                                <p class="ui-panel-title">Departments</p>
                                <p class="controls"><button type="text" (click)="displayAssignDepartmentsDialog=true" pButton icon="ui-icon-person-add" label="Add Departments&hellip;"></button></p>
                            </header>

                            <div class="ui-grid-row">

                                <p-dataTable [value]="testFacilityTenants" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]">
                                    <p-column field="name" header="Name(Department Name)" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                                    <p-column field="role" header="Next Scheduled Test date" sortable="true"></p-column>
                                    <p-column field="role" header="Department PIC" sortable="true"></p-column>
                                    <p-column header="Action">
                                        <!--<template pTemplate type="header">
                                <button pButton type="button" icon="ui-icon-remove-circle" label="Delete"></button>
                            </template>-->
                                        <template let-TestFacilityTenant="rowData" pTemplate type="body">
                                            <button pButton type="button" icon="ui-icon-remove-circle" (click)="onDeleteTenantMap(TestFacilityTenant.id)" label="Delete"></button>
                                        </template>

                                    </p-column>
                                </p-dataTable>

                            </div>

                        </p-panel>

                        <!-- End Panel - Departments -->

                    </form>

                </div>


            </p-tabPanel>

            <p-tabPanel header="Equipment" id="equipment" headerStyleClass="equipment">
                <p-growl [value]="msgs"></p-growl>
                <p-dialog header="Add Equipment" [(visible)]="displayAssignEquipmentsDialog" modal="modal" showEffect="fade" responsive="true">

                    <p>Please select any equipment at the {{testFacility.name}} test facility.</p>

                    <div class="input-row">

                        <!-- Note: p-dropdown includes a "label" element, so it should not be wrapped in another one. -->
                        <span class="pseudo-label">Equipment</span>

                        <p-dropdown [options]="equipments" (onChange)="onEquipmentChange($event)" name="equipments" [autoWidth]="false"></p-dropdown>

                    </div>

                    <!-- End Role -->

                    <footer>
                        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                            <!--<label class="checkbox"><input type="checkbox"> Keep Open</label>-->
                            <p-checkbox name="groupname" value="IsKeepOpen" label="Keep Open" [(ngModel)]="IsKeepOpen" binary="true"></p-checkbox>
                            <button type="button" pButton icon="ui-icon-close" (click)="displayAssignEquipmentsDialog=false" label="Cancel"></button>
                            <button type="button" pButton icon="ui-icon-save" (click)="onAddEquipment()" label="Add Equipment"></button>
                        </div>
                    </footer>

                </p-dialog>
                <p-panel>
                    <header class="with-controls">
                        <p class="ui-panel-title"> Equipment List</p>
                        <p class="controls"><button type="text" (click)="displayAssignEquipmentsDialog=true" pButton icon="ui-icon-person-add" label="Add Equipment&hellip;"></button></p>
                    </header>
                    <div class="ui-grid-col-4"></div>
                   
                    <p-dataTable [value]="TestFacilityEquipments" selectionMode="single"
                                 [paginator]="true" rows="15" [responsive]="true">
                        <p-column field="equipmentName" header="Equipment Name" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                        <p-column field="serialNumber" header="Serial Number" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                        <p-column field="equipmentTypeName" header="Equipment TypeName" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                        <p-column field="equipmentTypeName" header="Next Calibration Date" sortable="true"></p-column>

                        <p-column header="Actions">
                            <template let-TestFacilityEquipment="rowData" pTemplate type="body">
                                <button pButton type="button" icon="ui-icon-arrow-forward" label="Move" (click)="showEquipmentDialog(TestFacilityEquipment)" title="Move To Another Test Facility"></button>
                                <button pButton type="button" icon="ui-icon-remove-circle" (click)="onDeleteEquipmentMap(TestFacilityEquipment.id)" label="Delete"></button>
                            </template>

                        </p-column>
                    </p-dataTable>
                        <p-dialog header="Test Facility Equipment" [(visible)]="displayEquipmentDialog" [responsive]="true" showEffect="fade" [modal]="true" width="300">
                            <div class="ui-grid-row">
                                <div class="ui-grid-col-4"><label for="name">Choose Test Facility</label></div>
                                <div class="ui-grid-col-8">
                                    <p-dropdown [options]="testFacilities" (onChange)="onTestFacilityChange($event)" name="testFacilities" [style]="{'width':'auto'}">
                                    </p-dropdown>
                                </div>
                            </div>
                            <footer>
                                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                                    <button type="button" pButton icon="fa-close" routerLink="/testfacilities" label="Cancel"></button>
                                    <button type="button" pButton icon="fa-check" (click)="moveEquipmenttoTestFacility()" label="Ok"></button>
                                </div>
                            </footer>
                        </p-dialog>

                   </p-panel>

            </p-tabPanel>


            <p-tabPanel header="Schedule" id="schedule" headerStyleClass="schedule">
                <div class="card card-w-title">

                    <div class="row">
                        <div class="ui-grid-col-1">
                            Project Code :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="projectCodes" (onChange)="onProjectCodeChange($event)" name="projectCodes" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Test Facility :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="testFacilities" (onChange)="onTestFacilityChange($event)" name="testFacilities" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Test Mode :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="testAllModes" (onChange)="onTestModeChange($event)" name="testModes" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Test Type :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="testTypes" (onChange)="onTestTypeChange($event)" name="testTypes" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Test Status :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="testStatus" (onChange)="onTestStatusChange($event)" name="testStatus" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Test Roles:
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="testRoles" (onChange)="onTestRoleChange($event)" name="testRoles" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                        <div class="ui-grid-col-1">
                            Build Levels :
                        </div>
                        <div class="ui-grid-col-2">
                            <p-multiSelect [options]="buildLevels" (onChange)="onBuildLevelChange($event)" name="buildLevels" [style]="{'width':'auto'}">
                            </p-multiSelect>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-12">

                        <div class="row" id="scheduleCalendarContainer">
                            <div id="calendar">
                            </div>

                        </div>

                    </div>
                </div>

            </p-tabPanel>


            <p-tabPanel header="Maintenance" id="tests">
                <div class="card card-w-title" *ngIf="formSchemaData">

                    <p-dataGrid [value]="formSchemaData">
                        <header>List of Test Facility Forms</header>
                        <template let-item>
                            <!--<pre style="height:auto; overflow-y: scroll">{{ item | json }}</pre><br/>-->
                            <div style="padding:3px" class="ui-g-12 ui-md-3">
                                <p-panel [header]="item.name"
                                         [style]="{'text-align':'center'}">
                                    <div>{{item.formSchemaCategories.$values[0].formSchemaCategory.name}}</div>
                                    <hr class="ui-widget-content" style="border-top:0">
                                    <button pButton
                                            icon="fa fa-external-link-square"
                                            type="text"
                                            iconPos="right"
                                            label="Preview Form"
                                            (click)="selectedFormToView(item.name, item.fields.$values)"></button>
                                    <button pButton
                                            icon="fa fa-plus"
                                            type="text"
                                            iconPos="right"
                                            label="Enter Information"
                                            (click)="showFormInstance(item)"></button>
                                </p-panel>
                            </div>
                        </template>
                    </p-dataGrid>

                    <!--<div *ngFor="let item of formSchemaData">
                        <h3>{{item.name}}</h3>
                        <span>
                            {{item.formSchemaCategories.$values[0].formSchemaCategory.name}}
                        </span>
                        <br/>
                        <button pButton
                                icon="fa fa-external-link-square"
                                type="text"
                                iconPos="right"
                                label="Preview Form"
                                (click)="selectedFormToView(item.name, item.fields.$values)">
                        </button>
                        <button pButton
                                icon="fa fa-plus"
                                type="text"
                                iconPos="right"
                                label="Enter Information"
                                (click)="showFormInstance()">
                        </button>
                    </div>-->
                </div>

                <p-dialog header="Form Preview"
                          [(visible)]="displayPreviewSelectedForm"
                          modal="true"
                          responsive="true"
                          width="1200">
                    <div class="card card-w-title">
                        <form-preview [selectedInputList]="selectedFormFields"
                                      [formName]="selectedFormName"></form-preview>
                        <footer>
                            <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                                <button pButton
                                        type="text"
                                        icon="fa fa-close"
                                        (click)="closeFormPreviewDialog()"
                                        label="Close Preview"></button>
                            </div>
                        </footer>
                    </div>
                </p-dialog>

                <p-dialog header="Form Data"
                          [(visible)]="displayFormInsanceForm"
                          modal="true"
                          responsive="true"
                          width="1200">
                    <div class="card card-w-title">
                        <form-instance *ngIf="displayFormInsanceForm"
                                       [formSchemaVersionId]="formInstanceFormSchemaVersionId"
                                       [entityIdentifierId]="entityIdentifierInfo.id"
                                       [entityId]="id"
                                       [formName]="selectedFormName"
                                       [selectedInputList]="formInstanceFields"
                                       (closeFormInstanceDialog)="closeFormInstanceDialog($event)">
                        </form-instance>
                        <footer>
                            <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                                <button pButton
                                        type="text"
                                        icon="fa fa-close"
                                        (click)="closeFormInstanceDialog()"
                                        label="Close Preview"></button>
                            </div>
                        </footer>
                    </div>
                </p-dialog>

            </p-tabPanel>

            <p-tabPanel header="Attachments" id="attachments">
                <h2>Attachments</h2>
                <p-growl [value]="msgs"></p-growl>
              
                    <div class="ui-grid-col-1">
                        Category:
                    </div>
                    <div class="col-sm-12">
                        <p-dropdown [options]="categories" (onChange)="onCategoryChange($event)" name="categories" [(ngModel)]="selectedCategory" [style]="{'width':'100%'}"></p-dropdown>
                    </div>                  
               
                <!--<div class="ui-grid-col-2"></div>-->
               
                    <p-fileUpload [name]="testfacility" url="{{titanApiUrl}}file/SaveDocuments/{{entityType}}/{{entityId}}/{{selectedCategory}}" (onUpload)="onUpload($event)"
                                  multiple="multiple" accept="image/*" maxFileSize="1000000" auto="auto">
                        <template pTemplate type="content">
                            <ul *ngIf="uploadedFiles.length">
                                <li *ngFor="let file of uploadedFiles">{{file.name}} - {{file.size}} bytes</li>
                            </ul>
                            <div class="ui-grid-row">
                                <!--<div class="ui-grid-col-2"><b>Test Facility Attachments</b></div>-->
                                <div class="ui-grid-col-2"></div>

                                <p-dataTable [value]="TestFacilityAttachments" [editable]="true">

                                    <!-- Begin File Name Column -->

                                    <p-column field="name" header="File Name">
                                        <template let-TestFacilityAttachment="rowData" pTemplate type="body">
                                            <a href="{{titanApiUrl}}TestFacilityAttachment/file/{{TestFacilityAttachment.id}}">{{TestFacilityAttachment.name}}</a>
                                        </template>
                                    </p-column>


                                    <!--<p-column header="Category" [style]="{'overflow':'visible'}">
                            <template pTemplate type="body" let-col>
                                <p-dropdown [options]="categories" (onChange)="onCategoryChange($event)" name="categories" [(ngModel)]="selectedCategory" [style]="{'width':'100%'}"></p-dropdown>

                              </template>
                        </p-column>-->
                                    <p-column field="category" header="Category">
                                       
                                            <template let-TestFacilityAttachment="rowData" pTemplate type="body">
                                                <!--<em style="color: #ddd">{{TestFacilityAttachment.employee}}</em>-->
                                                {{TestFacilityAttachment.category}}
                                            </template>
                                    </p-column>
                                    <!-- End File Name Column -->
                                    <!-- Begin Uploaded By Column -->

                                    <p-column field="employee" header="Employee">
                                       
                                            <template let-TestFacilityAttachment="rowData" pTemplate type="body">
                                                <!--<em style="color: #ddd">{{TestFacilityAttachment.employee}}</em>-->
                                                {{TestFacilityAttachment.employee}}
                                            </template>
                                    </p-column>

                                    <!-- End Uploaded By Column -->
                                    <!-- Begin When Uploaded Column -->

                                    <p-column field="TestFacilityAttachment.timeStamp" header="TimeStamp">
                                        <template let-TestFacilityAttachment="rowData" pTemplate type="body">
                                            {{TestFacilityAttachment.timeStamp}}
                                        </template>
                                    </p-column>

                                    <!-- End When Uploaded Column -->
                                    <!-- Begin Actions Column -->

                                    <p-column header="Actions">
                                        <template let-TestFacilityAttachment="rowData" pTemplate type="body">

                                            <a href="{{titanApiUrl}}TestFacilityAttachment/file/{{TestFacilityAttachment.id}}">Download</a>
                                            <!--<button pButton type="button" icon="ui-icon-file-download" label="Download" (click)="downloadAttachment(TestFacilityAttachment)"></button>-->
                                            <button pButton type="button" icon="ui-icon-remove-circle" label="Delete" (click)="onDelete(TestFacilityAttachment)"></button>
                                        </template>
                                    </p-column>

                                    <!-- End Actions Column -->

                                </p-dataTable>
                            </div>
                        </template>
                    </p-fileUpload>
             
            </p-tabPanel>

            <p-tabPanel header="Log" id="log" headerStyleClass="log">
                <p-growl [value]="msgs"></p-growl>
                <form name="tForm2" enctype="application/x-www-form-urlencoded">
                    <p-panel>

                        <header class="with-controls">
                            <p class="ui-panel-title">Comments</p>

                        </header>
                        <div class="ui-grid-row">
                            <p-editor [(ngModel)]="comment" name="comment" [style]="{'height':'320px'}"></p-editor>
                        </div>


                        <div class="ui-grid-col-2"></div>
                        <!--<a routerLink="add/{{id}}"><i class="fa ui-icon-add"></i>Add New Sensor Request</a>-->
                        <button pButton type="button" icon="ui-icon-comment" label="Add Comment" (click)="AddLogComment()"></button>
                    </p-panel>
                    </form>
                    <div class="ui-grid-col-2"></div>
                    <div class="ui-grid-row">


                        <div class="ui-grid-col-2"></div>
                        <p-dataTable [value]="testFacilityLogComments" selectionMode="single"
                                     [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]">
                            [responsive]="true">
                            <p-column field="event" header="Information" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                            <p-column field="comment" header="Audit/Comment" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                            <p-column field="employee" header="Employee" sortable="true" [filter]="true" filterPlaceholder="Search"></p-column>
                            <p-column field="createdOn" header="Timestamp" sortable="true"></p-column>
                        </p-dataTable>

                    </div>


</p-tabPanel>
        </p-tabView>
    </div>

</div>